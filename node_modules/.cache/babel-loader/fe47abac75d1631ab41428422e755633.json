{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nvar Status;\n\n(function (Status) {\n  Status[\"LOADING\"] = \"loading\";\n  Status[\"FULFILLED\"] = \"fulfilled\";\n  Status[\"REJECT\"] = \"reject\";\n})(Status || (Status = {}));\n\nexport const fetchPizzas = createAsyncThunk('pizza/fetchPizzasStatus', async params => {\n  let {\n    order,\n    sortBy,\n    category,\n    searchBy,\n    currentPage\n  } = params;\n  const {\n    data\n  } = await axios.get(`https://62ed2633818ab252b60b026e.mockapi.io/items?${searchBy}&p=${currentPage}&l=8&${category}&sortBy=${sortBy}&order=${order}`);\n  return data;\n});\nconst initialState = {\n  items: [],\n  status: 'loading'\n};\nconst pizzaSlice = createSlice({\n  name: 'pizza',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchPizzas.pending, state => {\n      state.status = Status.LOADING;\n      state.items = [];\n    });\n    builder.addCase(fetchPizzas.fulfilled, (state, action) => {\n      state.items = action.payload;\n      state.status = Status.FULFILLED;\n    });\n    builder.addCase(fetchPizzas.rejected, state => {\n      state.status = Status.REJECT;\n      alert('error');\n      state.items = [];\n    });\n  }\n});\nexport const selectPizzas = state => state.pizza;\nexport default pizzaSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","Status","fetchPizzas","params","order","sortBy","category","searchBy","currentPage","data","get","initialState","items","status","pizzaSlice","name","reducers","extraReducers","builder","addCase","pending","state","LOADING","fulfilled","action","payload","FULFILLED","rejected","REJECT","alert","selectPizzas","pizza","reducer"],"sources":["/Users/maksimdimitrak/Desktop/Programming/portfolio/react_pizza/src/redux/slices/pizzaSlice.ts"],"sourcesContent":["import { RootState } from './../store';\nimport { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport axios from 'axios'\n\n\nexport type TFetchFilter = {\n\torder: string,\n\tsortBy: string,\n\tcategory: string,\n\tsearchBy: string,\n\tcurrentPage: number\n\n}\ntype TPizzaItem = {\n\tid: number,\n\tname: string,\n\timgUrl: string,\n\tprice: number,\n\ttype: number,\n\tsize: number,\n\tcount: number,\n}\ninterface IPizzaSliceState {\n\titems: TPizzaItem[],\n\tstatus: string\n}\nenum Status {\n\tLOADING = 'loading',\n\tFULFILLED = 'fulfilled',\n\tREJECT = 'reject',\n}\nexport const fetchPizzas = createAsyncThunk<TPizzaItem[], TFetchFilter>('pizza/fetchPizzasStatus', async (params) => {\n\tlet { order, sortBy, category, searchBy, currentPage } = params\n\tconst { data } = await axios.get<TPizzaItem[]>(`https://62ed2633818ab252b60b026e.mockapi.io/items?${searchBy}&p=${currentPage}&l=8&${category}&sortBy=${sortBy}&order=${order}`)\n\treturn data\n})\n\nconst initialState: IPizzaSliceState = {\n\titems: [],\n\tstatus: 'loading',\n}\n\nconst pizzaSlice = createSlice({\n\tname: 'pizza',\n\tinitialState,\n\treducers: {\n\t},\n\textraReducers: (builder) => {\n\t\tbuilder.addCase(fetchPizzas.pending, (state) => {\n\t\t\tstate.status = Status.LOADING\n\t\t\tstate.items = []\n\t\t})\n\t\tbuilder.addCase(fetchPizzas.fulfilled, (state, action) => {\n\t\t\tstate.items = action.payload\n\t\t\tstate.status = Status.FULFILLED\n\t\t})\n\t\tbuilder.addCase(fetchPizzas.rejected, (state) => {\n\t\t\tstate.status = Status.REJECT\n\t\t\talert('error')\n\t\t\tstate.items = []\n\t\t})\n\t}\n})\n\nexport const selectPizzas = (state: RootState) => state.pizza\n\nexport default pizzaSlice.reducer"],"mappings":"AACA,SAASA,gBAAT,EAA2BC,WAA3B,QAA6D,kBAA7D;AACA,OAAOC,KAAP,MAAkB,OAAlB;IAwBKC,M;;WAAAA,M;EAAAA,M;EAAAA,M;EAAAA,M;GAAAA,M,KAAAA,M;;AAKL,OAAO,MAAMC,WAAW,GAAGJ,gBAAgB,CAA6B,yBAA7B,EAAwD,MAAOK,MAAP,IAAkB;EACpH,IAAI;IAAEC,KAAF;IAASC,MAAT;IAAiBC,QAAjB;IAA2BC,QAA3B;IAAqCC;EAArC,IAAqDL,MAAzD;EACA,MAAM;IAAEM;EAAF,IAAW,MAAMT,KAAK,CAACU,GAAN,CAAyB,qDAAoDH,QAAS,MAAKC,WAAY,QAAOF,QAAS,WAAUD,MAAO,UAASD,KAAM,EAAvJ,CAAvB;EACA,OAAOK,IAAP;AACA,CAJ0C,CAApC;AAMP,MAAME,YAA8B,GAAG;EACtCC,KAAK,EAAE,EAD+B;EAEtCC,MAAM,EAAE;AAF8B,CAAvC;AAKA,MAAMC,UAAU,GAAGf,WAAW,CAAC;EAC9BgB,IAAI,EAAE,OADwB;EAE9BJ,YAF8B;EAG9BK,QAAQ,EAAE,EAHoB;EAK9BC,aAAa,EAAGC,OAAD,IAAa;IAC3BA,OAAO,CAACC,OAAR,CAAgBjB,WAAW,CAACkB,OAA5B,EAAsCC,KAAD,IAAW;MAC/CA,KAAK,CAACR,MAAN,GAAeZ,MAAM,CAACqB,OAAtB;MACAD,KAAK,CAACT,KAAN,GAAc,EAAd;IACA,CAHD;IAIAM,OAAO,CAACC,OAAR,CAAgBjB,WAAW,CAACqB,SAA5B,EAAuC,CAACF,KAAD,EAAQG,MAAR,KAAmB;MACzDH,KAAK,CAACT,KAAN,GAAcY,MAAM,CAACC,OAArB;MACAJ,KAAK,CAACR,MAAN,GAAeZ,MAAM,CAACyB,SAAtB;IACA,CAHD;IAIAR,OAAO,CAACC,OAAR,CAAgBjB,WAAW,CAACyB,QAA5B,EAAuCN,KAAD,IAAW;MAChDA,KAAK,CAACR,MAAN,GAAeZ,MAAM,CAAC2B,MAAtB;MACAC,KAAK,CAAC,OAAD,CAAL;MACAR,KAAK,CAACT,KAAN,GAAc,EAAd;IACA,CAJD;EAKA;AAnB6B,CAAD,CAA9B;AAsBA,OAAO,MAAMkB,YAAY,GAAIT,KAAD,IAAsBA,KAAK,CAACU,KAAjD;AAEP,eAAejB,UAAU,CAACkB,OAA1B"},"metadata":{},"sourceType":"module"}